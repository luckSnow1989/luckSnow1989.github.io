<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0035)http://www.iteye.com/problems/44763 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>struts2 验证码实例 - ITeye问答</title>
    <meta name="description" content="刚在网上搜了很长时间都没有搜到一个完整的，能用的 struts2验证码实例   所以在这里请求大家帮助啊！！！ 谢谢了，我zaixiandeng！！！">
    <meta name="keywords" content="Struts Java">
    <link rel="search" type="application/opensearchdescription+xml" href="http://www.iteye.com/open_search.xml" title="ITeye">
    <link rel="shortcut icon" href="http://www.iteye.com/images/favicon.ico" type="image/x-icon">
    <link href="http://www.iteye.com/rss/ask" rel="alternate" title="ITeye问答" type="application/rss+xml">
    <script type="text/javascript" async="" src="./struts2 验证码实例 - ITeye问答_files/ga.js"></script><script src="./struts2 验证码实例 - ITeye问答_files/application.js" type="text/javascript"></script>
    <link href="./struts2 验证码实例 - ITeye问答_files/ask.css" media="screen" rel="stylesheet" type="text/css">
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-535605-1']);
  _gaq.push(['_setDomainName', 'iteye.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


      <link href="./struts2 验证码实例 - ITeye问答_files/SyntaxHighlighter.css" media="screen" rel="stylesheet" type="text/css">
  <script src="./struts2 验证码实例 - ITeye问答_files/shCoreCommon.js" type="text/javascript"></script>
  <script src="./struts2 验证码实例 - ITeye问答_files/code_favorites.js" type="text/javascript"></script>
  <script type="text/javascript">
    window.recommend_tags = {"44":"","55":"Ruby, Python, PHP, Flash, C++, .net","39":"Hibernate, Spring, Struts, iBATIS, \u4f01\u4e1a\u5e94\u7528, Lucene, SOA","45":"","46":"","41":"JavaScript, HTML5, jQuery, CSS, ","48":"Android, iOS, wp7","43":"Linux, \u6570\u636e\u5e93, \u654f\u6377\u7f16\u7a0b, \u6570\u636e\u7ed3\u6784, \u8f6f\u4ef6\u6d4b\u8bd5, \u9879\u76ee\u7ba1\u7406"};
  </script>
  <style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-xml .cdata { color: #ff1493; }.dp-xml .tag, .dp-xml .tag-name { color: #069; font-weight: bold; }.dp-xml .attribute { color: red; }.dp-xml .attribute-value { color: blue; }</style><style type="text/css">.dp-default .number { color: #C00000; }</style></head>
  <body><div id="BAIDU_DUP_fp_wrapper" style="position: absolute; left: -1px; bottom: -1px; z-index: 0; width: 0px; height: 0px; overflow: hidden; visibility: hidden; display: none;"><iframe id="BAIDU_DUP_fp_iframe" src="./struts2 验证码实例 - ITeye问答_files/o.htm" style="width: 0px; height: 0px; visibility: hidden; display: none;"></iframe></div>
    <div id="page">
      <div id="header">
        <div class="clearfix"><div id="user_nav">
      <a href="http://www.iteye.com/login" class="welcome" title="登录">您还未登录 !</a>
    <a href="http://www.iteye.com/login">登录</a>
    <a href="http://www.iteye.com/signup" class="nobg">注册</a>
  </div>
</div>
        <div class="clearfix">
          <div id="branding">
            <a href="http://www.iteye.com/"><img alt="ITeye3.0" src="./struts2 验证码实例 - ITeye问答_files/logo.gif" title="ITeye-最棒的软件开发交流社区"></a>
          </div>
          <div id="gg"><!--AdForward Begin:-->
<script type="text/javascript" ads-src="http://csdnim.allyes.com/main/s?user=iteye|ask|banner1&amp;db=csdnim&amp;border=0&amp;local=yes&amp;js=ie" src="./struts2 验证码实例 - ITeye问答_files/AllyesDeliver.min.js" charset="gbk" id="allyes_ins_2ece1975" ads-outputs="0" ads-tid="21c1694c2_0"></script><div id="21c1694c2_0" style="padding:0;margin:0;border:0;"><script type="text/javascript" data-belong="allyes" src="./struts2 验证码实例 - ITeye问答_files/s"></script><script type="text/javascript">
/*ITeye问答频道置顶banner728*90，创建于2014-7-3*/
var cpro_id = "u1617760";
</script>
<script src="./struts2 验证码实例 - ITeye问答_files/c.js" type="text/javascript"></script><div id="BAIDU_DUP_wrapper_u1617760_0"></div><script charset="utf-8" src="./struts2 验证码实例 - ITeye问答_files/acom"></script><script type="text/javascript" data-belong="allyes" src="./struts2 验证码实例 - ITeye问答_files/delay.min.js"></script><script type="text/javascript" data-belong="allyes" src="./struts2 验证码实例 - ITeye问答_files/delay.min.js"></script><script type="text/javascript" data-belong="allyes" src="./struts2 验证码实例 - ITeye问答_files/delay.min.js"></script><script type="text/javascript" data-belong="allyes" src="./struts2 验证码实例 - ITeye问答_files/delay.min.js"></script><script type="text/javascript" data-belong="allyes" src="./struts2 验证码实例 - ITeye问答_files/delay.min.js"></script></div>
<!--AdForward End--></div>
        </div>
      </div>

      <div id="content" class="clearfix ask_action_handler">
        <div id="main">
          



          


<div class="h-entry" style="display:none">
  <a href="http://christy-fang.iteye.com/" class="p-author" target="_blank">christy_fang</a>
</div>


<div class="crumbs">
  <a href="http://www.iteye.com/problems">问答首页</a> <span class="arrow">→</span> <a href="http://www.iteye.com/problems/forums/Java">Java企业应用</a>
</div>

<div class="problem problem_g">
  <dl>
    <dt>
      <div class="vote" id="vote_problem_44763">
  <span>0</span><a class="vote_up_off" href="http://www.iteye.com/problems/44763#" onclick="this.disabled = true; new Ajax.Request(&#39;/problems/44763/votes?type=up&#39;, {asynchronous:true, evalScripts:true, method:&#39;post&#39;, parameters:&#39;authenticity_token=&#39; + encodeURIComponent(&#39;FPY+SKRiTatFgGKpmwzhCqz852ET0YBaSZxy9z4IrMI=&#39;)}); return false;" title="支持：这是一个描述清晰的有价值的好问题"></a>
  <a class="vote_down_off" href="http://www.iteye.com/problems/44763#" onclick="this.disabled = true; new Ajax.Request(&#39;/problems/44763/votes?type=down&#39;, {asynchronous:true, evalScripts:true, method:&#39;post&#39;, parameters:&#39;authenticity_token=&#39; + encodeURIComponent(&#39;FPY+SKRiTatFgGKpmwzhCqz852ET0YBaSZxy9z4IrMI=&#39;)}); return false;" title="反对：这个问题没有价值或描述不清"></a><span>0</span>
</div>

    </dt>
    <dd>
      <div class="sproblem_right">
        <h3 class="close"><a href="./struts2 验证码实例 - ITeye问答_files/struts2 验证码实例 - ITeye问答.htm">struts2 验证码实例</a><span class="score">3</span></h3>

        <div class="new_content"> 
          刚在网上搜了很长时间都没有搜到一个完整的，能用的 struts2验证码实例&nbsp; 
<br>所以在这里请求大家帮助啊！！！ 谢谢了，我zaixiandeng！！！
          
        </div>

        <div class="ask_label">
          <div class="tags"><a href="http://www.iteye.com/problems/tags/Struts">Struts</a>&nbsp;</div>
          <span class="gray">2010年6月22日 11:57</span>
        </div>
        <div class="user_info fr">
          <a href="http://christy-fang.iteye.com/blog/answered_problems"><img alt="christy_fang" class="logo" src="./struts2 验证码实例 - ITeye问答_files/e9b9411d-5a73-369f-80b6-d72f45e70d14-thumb.png" title="christy_fang"></a>
<span class="user_blog"><a href="http://christy-fang.iteye.com/blog/answered_problems" title="christy_fang">christy_fang</a></span>
<br>
<span class="score gray" title="问答积分">37</span>
<br>
<span class="gold gray" title="金牌">0</span>
<span class="silver gray" title="银牌">0</span>
<span class="bronze gray" title="铜牌">0</span>

        </div>
      </div>

      <div class="clear"></div>
	  <div id="ask_recommended_q2"><iframe src="./struts2 验证码实例 - ITeye问答_files/186.htm" scrolling="no" width="468" height="60" frameborder="0"></iframe></div>
      


      <div id="problem_action" class="action">
        <ul>
          <li class="comment"><a href="javascript:void(0);" class="ask_click_action" data_action_sub_type="comment" data_action_type="dropdown" data_comments_count="0" data_parent_id="problem_44763" data_url="/problems/44763/comments"><img alt="Comment" src="./struts2 验证码实例 - ITeye问答_files/comment.gif">添加评论</a></li>

          
            <li id="follow_44763"><a href="http://www.iteye.com/problems/44763#" onclick="if($(this).next()){return false;}; $(this).insert({after: &#39;&lt;img src=&quot;/images/spinner.gif&quot; /&gt;&#39;});; new Ajax.Request(&#39;/problems/44763/follows&#39;, {asynchronous:true, evalScripts:true, method:&#39;post&#39;, parameters:&#39;authenticity_token=&#39; + encodeURIComponent(&#39;FPY+SKRiTatFgGKpmwzhCqz852ET0YBaSZxy9z4IrMI=&#39;)}); return false;"><img src="./struts2 验证码实例 - ITeye问答_files/collect.gif">关注(0)</a></li>
          

          

          
            
          
        </ul>
      </div>

    </dd>
  </dl>
  <div class="clear"></div>
</div>


<div class="clearfix"></div>
<div id="solutions" class="solutions">
  
    <h3 id="num">2个答案
      <span style="float:right;margin-left:10px;"><a href="javascript:void(0);" id="sort_time_link" onclick="sortSolutionsByTime()" style="color:#069;font-weight:normal;">按时间排序</a></span>
      <span style="float:right;margin-left:10px;"><a href="javascript:void(0);" id="sort_vote_link" onclick="sortSolutionsByVote();" style="color:black;font-weight:normal;">按投票排序</a></span>
    </h3>
    
    <dl time="1362033193" votes="0" class="for_sort">
  <dt>
    <div class="vote" id="vote_solution_195819">
  <span>0</span><a class="vote_up_off" href="http://www.iteye.com/problems/44763#" onclick="this.disabled = true; new Ajax.Request(&#39;/solutions/195819/votes?type=up&#39;, {asynchronous:true, evalScripts:true, method:&#39;post&#39;, parameters:&#39;authenticity_token=&#39; + encodeURIComponent(&#39;FPY+SKRiTatFgGKpmwzhCqz852ET0YBaSZxy9z4IrMI=&#39;)}); return false;" title="支持：好答案"></a>
  <a class="vote_down_off" href="http://www.iteye.com/problems/44763#" onclick="this.disabled = true; new Ajax.Request(&#39;/solutions/195819/votes?type=down&#39;, {asynchronous:true, evalScripts:true, method:&#39;post&#39;, parameters:&#39;authenticity_token=&#39; + encodeURIComponent(&#39;FPY+SKRiTatFgGKpmwzhCqz852ET0YBaSZxy9z4IrMI=&#39;)}); return false;" title="反对：没有价值的答案"></a><span>0</span>
</div>
  </dt>
  <dd id="s_195819" class="solution_dd">
    <div class="sproblem_right">
      <p>不错，很好，struts2的</p>

      <div class="ask_label"><span class="gray">2013年2月28日 14:33</span></div>

      <div class="user_info fr">
        <a href="http://suozny.iteye.com/blog/answered_problems"><img alt="suozny" class="logo" src="./struts2 验证码实例 - ITeye问答_files/user-logo-thumb.gif" title="suozny"></a>
<span class="user_blog"><a href="http://suozny.iteye.com/blog/answered_problems" title="suozny">suozny</a></span>
<br>
<span class="score gray" title="问答积分">30</span>
<br>
<span class="gold gray" title="金牌">0</span>
<span class="silver gray" title="银牌">0</span>
<span class="bronze gray" title="铜牌">0</span>

      </div>
    </div>
    <div class="clear"></div>
    <div class="action">
      <ul>
        <li class="comment"><a href="javascript:void(0);" class="ask_click_action" data_action_sub_type="comment" data_action_type="dropdown" data_comments_count="0" data_parent_id="solution_195819" data_url="/solutions/195819/comments"><img alt="Comment" src="./struts2 验证码实例 - ITeye问答_files/comment.gif">添加评论</a></li>
        
        
      </ul>
    </div>

  </dd>
</dl>
<dl time="1277227709" votes="0" class="for_sort">
  <dt>
    <div class="vote" id="vote_solution_97658">
  <span>0</span><a class="vote_up_off" href="http://www.iteye.com/problems/44763#" onclick="this.disabled = true; new Ajax.Request(&#39;/solutions/97658/votes?type=up&#39;, {asynchronous:true, evalScripts:true, method:&#39;post&#39;, parameters:&#39;authenticity_token=&#39; + encodeURIComponent(&#39;FPY+SKRiTatFgGKpmwzhCqz852ET0YBaSZxy9z4IrMI=&#39;)}); return false;" title="支持：好答案"></a>
  <a class="vote_down_off" href="http://www.iteye.com/problems/44763#" onclick="this.disabled = true; new Ajax.Request(&#39;/solutions/97658/votes?type=down&#39;, {asynchronous:true, evalScripts:true, method:&#39;post&#39;, parameters:&#39;authenticity_token=&#39; + encodeURIComponent(&#39;FPY+SKRiTatFgGKpmwzhCqz852ET0YBaSZxy9z4IrMI=&#39;)}); return false;" title="反对：没有价值的答案"></a><span>0</span>
</div>
  </dt>
  <dd id="s_97658" class="solution_dd">
    <div class="sproblem_right">
      <p>示例下载地址:
<br><a href="http://www.rayfile.com/files/a86ec6d7-7e23-11df-9701-0015c55db73d/" target="_blank">http://www.rayfile.com/files/a86ec6d7-7e23-11df-9701-0015c55db73d/</a>
<br>
<br>运行效果:
<br><img src="./struts2 验证码实例 - ITeye问答_files/8b97d720-8f99-3141-b68c-ee5ce1f92ec6.jpg">
<br>
<br>我参考别人代码写的一个简单的例子:
<br></p><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=package%20org.apache.struts.action%3B%0A%0Aimport%20java.awt.Color%3B%0Aimport%20java.awt.Font%3B%0Aimport%20java.awt.Graphics%3B%0Aimport%20java.awt.image.BufferedImage%3B%0Aimport%20java.io.ByteArrayInputStream%3B%0Aimport%20java.io.ByteArrayOutputStream%3B%0Aimport%20java.util.Random%3B%0A%0Aimport%20javax.imageio.ImageIO%3B%0Aimport%20javax.imageio.stream.ImageOutputStream%3B%0A%0Aimport%20com.opensymphony.xwork2.ActionContext%3B%0Aimport%20com.opensymphony.xwork2.ActionSupport%3B%0A%0Apublic%20class%20RandomPictureAction%20extends%20ActionSupport%20%7B%0A%0A%09%2F**%0A%09%20*%20%0A%09%20*%2F%0A%09private%20static%20final%20long%20serialVersionUID%20%3D%20-6950908478971552308L%3B%0A%0A%09private%20ByteArrayInputStream%20inputStream%3B%0A%0A%09public%20String%20execute()%20throws%20Exception%20%7B%0A%09%09%2F%2F%20%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%9B%BE%E8%B1%A1%0A%09%09int%20width%20%3D%2085%2C%20height%20%3D%2020%3B%0A%0A%09%09BufferedImage%20image%20%3D%20new%20BufferedImage(width%2C%20height%2C%0A%09%09%09%09BufferedImage.TYPE_INT_RGB)%3B%0A%0A%09%09%2F%2F%20%E8%8E%B7%E5%8F%96%E5%9B%BE%E5%BD%A2%E4%B8%8A%E4%B8%8B%E6%96%87%0A%09%09Graphics%20g%20%3D%20image.getGraphics()%3B%0A%0A%09%09%2F%2F%20%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E7%B1%BB%0A%09%09Random%20random%20%3D%20new%20Random()%3B%0A%0A%09%09%2F%2F%20%E8%AE%BE%E5%AE%9A%E8%83%8C%E6%99%AF%E8%89%B2%0A%09%09g.setColor(getRandColor(200%2C%20250))%3B%0A%09%09g.fillRect(0%2C%200%2C%20width%2C%20height)%3B%0A%0A%09%09%2F%2F%20%E8%AE%BE%E5%AE%9A%E5%AD%97%E4%BD%93%0A%09%09g.setFont(new%20Font(%22Times%20New%20Roman%22%2C%20Font.PLAIN%2C%2018))%3B%0A%0A%09%09%2F%2F%20%E9%9A%8F%E6%9C%BA%E4%BA%A7%E7%94%9F155%E6%9D%A1%E5%B9%B2%E6%89%B0%E7%BA%BF%EF%BC%8C%E4%BD%BF%E5%9B%BE%E8%B1%A1%E4%B8%AD%E7%9A%84%E8%AE%A4%E8%AF%81%E7%A0%81%E4%B8%8D%E6%98%93%E8%A2%AB%E5%85%B6%E5%AE%83%E7%A8%8B%E5%BA%8F%E6%8E%A2%E6%B5%8B%E5%88%B0%0A%09%09g.setColor(getRandColor(160%2C%20200))%3B%0A%09%09for%20(int%20i%20%3D%200%3B%20i%20%3C%20155%3B%20i%2B%2B)%20%7B%0A%09%09%09int%20x%20%3D%20random.nextInt(width)%3B%0A%09%09%09int%20y%20%3D%20random.nextInt(height)%3B%0A%09%09%09int%20xl%20%3D%20random.nextInt(12)%3B%0A%09%09%09int%20yl%20%3D%20random.nextInt(12)%3B%0A%09%09%09g.drawLine(x%2C%20y%2C%20x%20%2B%20xl%2C%20y%20%2B%20yl)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20%E5%8F%96%E9%9A%8F%E6%9C%BA%E4%BA%A7%E7%94%9F%E7%9A%84%E8%AE%A4%E8%AF%81%E7%A0%81(6%E4%BD%8D%E6%95%B0%E5%AD%97)%0A%09%09String%20sRand%20%3D%20%22%22%3B%0A%09%09for%20(int%20i%20%3D%200%3B%20i%20%3C%206%3B%20i%2B%2B)%20%7B%0A%09%09%09String%20rand%20%3D%20String.valueOf(random.nextInt(10))%3B%0A%09%09%09sRand%20%2B%3D%20rand%3B%0A%09%09%09%2F%2F%20%E5%B0%86%E8%AE%A4%E8%AF%81%E7%A0%81%E6%98%BE%E7%A4%BA%E5%88%B0%E5%9B%BE%E8%B1%A1%E4%B8%AD%0A%09%09%09g.setColor(new%20Color(20%20%2B%20random.nextInt(110)%2C%2020%20%2B%20random%0A%09%09%09%09%09.nextInt(110)%2C%2020%20%2B%20random.nextInt(110)))%3B%0A%09%09%09%2F%2F%20%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E5%87%BA%E6%9D%A5%E7%9A%84%E9%A2%9C%E8%89%B2%E7%9B%B8%E5%90%8C%EF%BC%8C%E5%8F%AF%E8%83%BD%E6%98%AF%E5%9B%A0%E4%B8%BA%E7%A7%8D%E5%AD%90%E5%A4%AA%E6%8E%A5%E8%BF%91%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AA%E8%83%BD%E7%9B%B4%E6%8E%A5%E7%94%9F%E6%88%90%0A%09%09%09g.drawString(rand%2C%2013%20*%20i%20%2B%206%2C%2016)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20%E5%B0%86%E8%AE%A4%E8%AF%81%E7%A0%81%E5%AD%98%E5%85%A5SESSION%0A%09%09ActionContext.getContext().getSession().put(%22rand%22%2C%20sRand)%3B%0A%0A%09%09%2F%2F%20%E5%9B%BE%E8%B1%A1%E7%94%9F%E6%95%88%0A%09%09g.dispose()%3B%0A%09%09ByteArrayOutputStream%20output%20%3D%20new%20ByteArrayOutputStream()%3B%0A%09%09ImageOutputStream%20imageOut%20%3D%20ImageIO.createImageOutputStream(output)%3B%0A%09%09ImageIO.write(image%2C%20%22JPEG%22%2C%20imageOut)%3B%0A%09%09imageOut.close()%3B%0A%09%09ByteArrayInputStream%20input%20%3D%20new%20ByteArrayInputStream(output%0A%09%09%09%09.toByteArray())%3B%0A%09%09this.setInputStream(input)%3B%0A%09%09return%20SUCCESS%3B%0A%09%7D%0A%0A%09%2F*%0A%09%20*%20%E7%BB%99%E5%AE%9A%E8%8C%83%E5%9B%B4%E8%8E%B7%E5%BE%97%E9%9A%8F%E6%9C%BA%E9%A2%9C%E8%89%B2%0A%09%20*%2F%0A%09private%20Color%20getRandColor(int%20fc%2C%20int%20bc)%20%7B%0A%09%09Random%20random%20%3D%20new%20Random()%3B%0A%09%09if%20(fc%20%3E%20255)%0A%09%09%09fc%20%3D%20255%3B%0A%09%09if%20(bc%20%3E%20255)%0A%09%09%09bc%20%3D%20255%3B%0A%09%09int%20r%20%3D%20fc%20%2B%20random.nextInt(bc%20-%20fc)%3B%0A%09%09int%20g%20%3D%20fc%20%2B%20random.nextInt(bc%20-%20fc)%3B%0A%09%09int%20b%20%3D%20fc%20%2B%20random.nextInt(bc%20-%20fc)%3B%0A%09%09return%20new%20Color(r%2C%20g%2C%20b)%3B%0A%09%7D%0A%0A%09public%20void%20setInputStream(ByteArrayInputStream%20inputStream)%20%7B%0A%09%09this.inputStream%20%3D%20inputStream%3B%0A%09%7D%0A%0A%09public%20ByteArrayInputStream%20getInputStream()%20%7B%0A%09%09return%20inputStream%3B%0A%09%7D%0A%0A%7D%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./struts2 验证码实例 - ITeye问答_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./struts2 验证码实例 - ITeye问答_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">package</span><span>&nbsp;org.apache.struts.action;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class="keyword">import</span><span>&nbsp;java.awt.Color;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.awt.Font;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.awt.Graphics;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.awt.image.BufferedImage;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.io.ByteArrayInputStream;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.io.ByteArrayOutputStream;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.util.Random;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.imageio.ImageIO;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.imageio.stream.ImageOutputStream;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class="keyword">import</span><span>&nbsp;com.opensymphony.xwork2.ActionContext;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;com.opensymphony.xwork2.ActionSupport;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;RandomPictureAction&nbsp;</span><span class="keyword">extends</span><span>&nbsp;ActionSupport&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="keyword">static</span><span>&nbsp;</span><span class="keyword">final</span><span>&nbsp;</span><span class="keyword">long</span><span>&nbsp;serialVersionUID&nbsp;=&nbsp;-6950908478971552308L;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;ByteArrayInputStream&nbsp;inputStream;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;execute()&nbsp;</span><span class="keyword">throws</span><span>&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;在内存中创建图象</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;width&nbsp;=&nbsp;</span><span class="number">85</span><span>,&nbsp;height&nbsp;=&nbsp;</span><span class="number">20</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BufferedImage&nbsp;image&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;BufferedImage(width,&nbsp;height,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BufferedImage.TYPE_INT_RGB);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;获取图形上下文</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Graphics&nbsp;g&nbsp;=&nbsp;image.getGraphics();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;生成随机类</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Random&nbsp;random&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;Random();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;设定背景色</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setColor(getRandColor(<span class="number">200</span><span>,&nbsp;</span><span class="number">250</span><span>));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.fillRect(<span class="number">0</span><span>,&nbsp;</span><span class="number">0</span><span>,&nbsp;width,&nbsp;height);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;设定字体</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setFont(<span class="keyword">new</span><span>&nbsp;Font(</span><span class="string">"Times&nbsp;New&nbsp;Roman"</span><span>,&nbsp;Font.PLAIN,&nbsp;</span><span class="number">18</span><span>));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;随机产生155条干扰线，使图象中的认证码不易被其它程序探测到</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setColor(getRandColor(<span class="number">160</span><span>,&nbsp;</span><span class="number">200</span><span>));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(</span><span class="keyword">int</span><span>&nbsp;i&nbsp;=&nbsp;</span><span class="number">0</span><span>;&nbsp;i&nbsp;&lt;&nbsp;</span><span class="number">155</span><span>;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;x&nbsp;=&nbsp;random.nextInt(width);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;y&nbsp;=&nbsp;random.nextInt(height);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;xl&nbsp;=&nbsp;random.nextInt(</span><span class="number">12</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;yl&nbsp;=&nbsp;random.nextInt(</span><span class="number">12</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawLine(x,&nbsp;y,&nbsp;x&nbsp;+&nbsp;xl,&nbsp;y&nbsp;+&nbsp;yl);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;取随机产生的认证码(6位数字)</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;sRand&nbsp;=&nbsp;<span class="string">""</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(</span><span class="keyword">int</span><span>&nbsp;i&nbsp;=&nbsp;</span><span class="number">0</span><span>;&nbsp;i&nbsp;&lt;&nbsp;</span><span class="number">6</span><span>;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;rand&nbsp;=&nbsp;String.valueOf(random.nextInt(<span class="number">10</span><span>));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sRand&nbsp;+=&nbsp;rand;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;将认证码显示到图象中</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setColor(<span class="keyword">new</span><span>&nbsp;Color(</span><span class="number">20</span><span>&nbsp;+&nbsp;random.nextInt(</span><span class="number">110</span><span>),&nbsp;</span><span class="number">20</span><span>&nbsp;+&nbsp;random&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.nextInt(<span class="number">110</span><span>),&nbsp;</span><span class="number">20</span><span>&nbsp;+&nbsp;random.nextInt(</span><span class="number">110</span><span>)));&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;调用函数出来的颜色相同，可能是因为种子太接近，所以只能直接生成</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawString(rand,&nbsp;<span class="number">13</span><span>&nbsp;*&nbsp;i&nbsp;+&nbsp;</span><span class="number">6</span><span>,&nbsp;</span><span class="number">16</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;将认证码存入SESSION</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ActionContext.getContext().getSession().put(<span class="string">"rand"</span><span>,&nbsp;sRand);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;图象生效</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.dispose();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteArrayOutputStream&nbsp;output&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;ByteArrayOutputStream();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ImageOutputStream&nbsp;imageOut&nbsp;=&nbsp;ImageIO.createImageOutputStream(output);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ImageIO.write(image,&nbsp;<span class="string">"JPEG"</span><span>,&nbsp;imageOut);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;imageOut.close();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteArrayInputStream&nbsp;input&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;ByteArrayInputStream(output&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.toByteArray());&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.setInputStream(input);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;SUCCESS;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/*</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;给定范围获得随机颜色</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;Color&nbsp;getRandColor(</span><span class="keyword">int</span><span>&nbsp;fc,&nbsp;</span><span class="keyword">int</span><span>&nbsp;bc)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Random&nbsp;random&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;Random();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(fc&nbsp;&gt;&nbsp;</span><span class="number">255</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fc&nbsp;=&nbsp;<span class="number">255</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(bc&nbsp;&gt;&nbsp;</span><span class="number">255</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bc&nbsp;=&nbsp;<span class="number">255</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;r&nbsp;=&nbsp;fc&nbsp;+&nbsp;random.nextInt(bc&nbsp;-&nbsp;fc);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;g&nbsp;=&nbsp;fc&nbsp;+&nbsp;random.nextInt(bc&nbsp;-&nbsp;fc);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;b&nbsp;=&nbsp;fc&nbsp;+&nbsp;random.nextInt(bc&nbsp;-&nbsp;fc);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">new</span><span>&nbsp;Color(r,&nbsp;g,&nbsp;b);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setInputStream(ByteArrayInputStream&nbsp;inputStream)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.inputStream&nbsp;=&nbsp;inputStream;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;ByteArrayInputStream&nbsp;getInputStream()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;inputStream;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="97658" codeable_type="Solution" source_url="http://www.iteye.com/problems/44763#s_97658" pre_index="0" title="struts2 验证码实例" style="display: none;">package org.apache.struts.action;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.util.Random;

import javax.imageio.ImageIO;
import javax.imageio.stream.ImageOutputStream;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

public class RandomPictureAction extends ActionSupport {

	/**
	 * 
	 */
	private static final long serialVersionUID = -6950908478971552308L;

	private ByteArrayInputStream inputStream;

	public String execute() throws Exception {
		// 在内存中创建图象
		int width = 85, height = 20;

		BufferedImage image = new BufferedImage(width, height,
				BufferedImage.TYPE_INT_RGB);

		// 获取图形上下文
		Graphics g = image.getGraphics();

		// 生成随机类
		Random random = new Random();

		// 设定背景色
		g.setColor(getRandColor(200, 250));
		g.fillRect(0, 0, width, height);

		// 设定字体
		g.setFont(new Font("Times New Roman", Font.PLAIN, 18));

		// 随机产生155条干扰线，使图象中的认证码不易被其它程序探测到
		g.setColor(getRandColor(160, 200));
		for (int i = 0; i &lt; 155; i++) {
			int x = random.nextInt(width);
			int y = random.nextInt(height);
			int xl = random.nextInt(12);
			int yl = random.nextInt(12);
			g.drawLine(x, y, x + xl, y + yl);
		}

		// 取随机产生的认证码(6位数字)
		String sRand = "";
		for (int i = 0; i &lt; 6; i++) {
			String rand = String.valueOf(random.nextInt(10));
			sRand += rand;
			// 将认证码显示到图象中
			g.setColor(new Color(20 + random.nextInt(110), 20 + random
					.nextInt(110), 20 + random.nextInt(110)));
			// 调用函数出来的颜色相同，可能是因为种子太接近，所以只能直接生成
			g.drawString(rand, 13 * i + 6, 16);
		}

		// 将认证码存入SESSION
		ActionContext.getContext().getSession().put("rand", sRand);

		// 图象生效
		g.dispose();
		ByteArrayOutputStream output = new ByteArrayOutputStream();
		ImageOutputStream imageOut = ImageIO.createImageOutputStream(output);
		ImageIO.write(image, "JPEG", imageOut);
		imageOut.close();
		ByteArrayInputStream input = new ByteArrayInputStream(output
				.toByteArray());
		this.setInputStream(input);
		return SUCCESS;
	}

	/*
	 * 给定范围获得随机颜色
	 */
	private Color getRandColor(int fc, int bc) {
		Random random = new Random();
		if (fc &gt; 255)
			fc = 255;
		if (bc &gt; 255)
			bc = 255;
		int r = fc + random.nextInt(bc - fc);
		int g = fc + random.nextInt(bc - fc);
		int b = fc + random.nextInt(bc - fc);
		return new Color(r, g, b);
	}

	public void setInputStream(ByteArrayInputStream inputStream) {
		this.inputStream = inputStream;
	}

	public ByteArrayInputStream getInputStream() {
		return inputStream;
	}

}
</pre>
<br>
<br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Xml代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3C!DOCTYPE%20struts%20PUBLIC%0A%20%20%20%20%22-%2F%2FApache%20Software%20Foundation%2F%2FDTD%20Struts%20Configuration%202.0%2F%2FEN%22%0A%20%20%20%20%22http%3A%2F%2Fstruts.apache.org%2Fdtds%2Fstruts-2.0.dtd%22%3E%0A%0A%3Cstruts%3E%0A%0A%09%3Cconstant%20name%3D%22struts.devMode%22%20value%3D%22true%22%20%2F%3E%0A%0A%09%3Cpackage%20name%3D%22randpicture%22%20extends%3D%22struts-default%22%3E%0A%0A%09%09%3Caction%20name%3D%22rand%22%20class%3D%22org.apache.struts.action.RandomPictureAction%22%3E%0A%09%09%09%3Cresult%20type%3D%22stream%22%3E%0A%09%09%09%09%3Cparam%20name%3D%22contentType%22%3Eimage%2Fjpeg%3C%2Fparam%3E%0A%09%09%09%09%3Cparam%20name%3D%22inputName%22%3EinputStream%3C%2Fparam%3E%0A%09%09%09%3C%2Fresult%3E%0A%09%09%3C%2Faction%3E%0A%09%09%0A%09%3C%2Fpackage%3E%0A%0A%3C%2Fstruts%3E%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./struts2 验证码实例 - ITeye问答_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./struts2 验证码实例 - ITeye问答_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-xml"><li><span><span class="tag">&lt;?</span><span class="tag-name">xml</span><span>&nbsp;</span><span class="attribute">version</span><span>=</span><span class="attribute-value">"1.0"</span><span>&nbsp;</span><span class="attribute">encoding</span><span>=</span><span class="attribute-value">"UTF-8"</span><span class="tag">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&lt;!DOCTYPE&nbsp;struts&nbsp;PUBLIC&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;"-//Apache&nbsp;Software&nbsp;Foundation//DTD&nbsp;Struts&nbsp;Configuration&nbsp;2.0//EN"&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;"http://struts.apache.org/dtds/struts-2.0.dtd"<span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class="tag">&lt;</span><span class="tag-name">struts</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">constant</span><span>&nbsp;</span><span class="attribute">name</span><span>=</span><span class="attribute-value">"struts.devMode"</span><span>&nbsp;</span><span class="attribute">value</span><span>=</span><span class="attribute-value">"true"</span><span>&nbsp;</span><span class="tag">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">package</span><span>&nbsp;</span><span class="attribute">name</span><span>=</span><span class="attribute-value">"randpicture"</span><span>&nbsp;</span><span class="attribute">extends</span><span>=</span><span class="attribute-value">"struts-default"</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">action</span><span>&nbsp;</span><span class="attribute">name</span><span>=</span><span class="attribute-value">"rand"</span><span>&nbsp;</span><span class="attribute">class</span><span>=</span><span class="attribute-value">"org.apache.struts.action.RandomPictureAction"</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">result</span><span>&nbsp;</span><span class="attribute">type</span><span>=</span><span class="attribute-value">"stream"</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">param</span><span>&nbsp;</span><span class="attribute">name</span><span>=</span><span class="attribute-value">"contentType"</span><span class="tag">&gt;</span><span>image/jpeg</span><span class="tag">&lt;/</span><span class="tag-name">param</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">param</span><span>&nbsp;</span><span class="attribute">name</span><span>=</span><span class="attribute-value">"inputName"</span><span class="tag">&gt;</span><span>inputStream</span><span class="tag">&lt;/</span><span class="tag-name">param</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">result</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">action</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">package</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">struts</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre class="xml" name="code" codeable_id="97658" codeable_type="Solution" source_url="http://www.iteye.com/problems/44763#s_97658" pre_index="1" title="struts2 验证码实例" style="display: none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;

	&lt;constant name="struts.devMode" value="true" /&gt;

	&lt;package name="randpicture" extends="struts-default"&gt;

		&lt;action name="rand" class="org.apache.struts.action.RandomPictureAction"&gt;
			&lt;result type="stream"&gt;
				&lt;param name="contentType"&gt;image/jpeg&lt;/param&gt;
				&lt;param name="inputName"&gt;inputStream&lt;/param&gt;
			&lt;/result&gt;
		&lt;/action&gt;
		
	&lt;/package&gt;

&lt;/struts&gt;
</pre>
<br>
<br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Jsp代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22ISO-8859-1%22%20%3F%3E%0A%3C%25%40%20taglib%20prefix%3D%22s%22%20uri%3D%22%2Fstruts-tags%22%25%3E%0A%3C%25%40%20page%20language%3D%22java%22%20contentType%3D%22text%2Fhtml%3B%20charset%3DISO-8859-1%22%0A%09pageEncoding%3D%22ISO-8859-1%22%25%3E%0A%3C!DOCTYPE%20html%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20XHTML%201.0%20Transitional%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FTR%2Fxhtml1%2FDTD%2Fxhtml1-transitional.dtd%22%3E%0A%3Chtml%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%0A%3Chead%3E%0A%3Cs%3Ahead%20%2F%3E%0A%3Cmeta%20http-equiv%3D%22Content-Type%22%20content%3D%22text%2Fhtml%3B%20charset%3DISO-8859-1%22%20%2F%3E%0A%3Ctitle%3ERandom%20Picture%3C%2Ftitle%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%3Cscript%20type%3D%22text%2Fjavascript%22%3E%0A%20%20%20%20function%20changeValidateCode(obj)%20%7B%0A%20%20%20%20%20%20%20%20var%20currentTime%3D%20new%20Date().getTime()%3B%0A%20%20%20%20%20%20%20%20obj.src%20%3D%20%22rand.action%3Fd%3D%22%20%2B%20currentTime%3B%0A%20%20%20%20%7D%0A%3C%2Fscript%3E%0A%0A%3Cimg%20src%3D%22rand.action%22%20onclick%3D%22changeValidateCode(this)%22%20%2F%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./struts2 验证码实例 - ITeye问答_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./struts2 验证码实例 - ITeye问答_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-default"><li><span><span>&lt;?xml&nbsp;version=</span><span class="string">"1.0"</span><span>&nbsp;encoding=</span><span class="string">"ISO-8859-1"</span><span>&nbsp;?&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;%@&nbsp;taglib&nbsp;prefix=<span class="string">"s"</span><span>&nbsp;uri=</span><span class="string">"/struts-tags"</span><span>%&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;%@&nbsp;page&nbsp;language=<span class="string">"java"</span><span>&nbsp;contentType=</span><span class="string">"text/html;&nbsp;charset=ISO-8859-1"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;pageEncoding=<span class="string">"ISO-8859-1"</span><span>%&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;<span class="string">"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN"</span><span>&nbsp;</span><span class="string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span>&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;html&nbsp;xmlns=<span class="string">"http://www.w3.org/1999/xhtml"</span><span>&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;head&gt;&nbsp;&nbsp;</span></li><li><span>&lt;s:head&nbsp;/&gt;&nbsp;&nbsp;</span></li><li><span>&lt;meta&nbsp;http-equiv=<span class="string">"Content-Type"</span><span>&nbsp;content=</span><span class="string">"text/html;&nbsp;charset=ISO-8859-1"</span><span>&nbsp;/&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;title&gt;Random&nbsp;Picture&lt;/title&gt;&nbsp;&nbsp;</span></li><li><span>&lt;/head&gt;&nbsp;&nbsp;</span></li><li><span>&lt;body&gt;&nbsp;&nbsp;</span></li><li><span>&lt;script&nbsp;type=<span class="string">"text/javascript"</span><span>&gt;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;changeValidateCode(obj)&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;currentTime=&nbsp;new&nbsp;Date().getTime();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.src&nbsp;=&nbsp;<span class="string">"rand.action?d="</span><span>&nbsp;+&nbsp;currentTime;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&lt;/script&gt;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&lt;img&nbsp;src=<span class="string">"rand.action"</span><span>&nbsp;onclick=</span><span class="string">"changeValidateCode(this)"</span><span>&nbsp;/&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;/body&gt;&nbsp;&nbsp;</span></li><li><span>&lt;/html&gt;&nbsp;&nbsp;</span></li></ol></div><pre class="jsp" name="code" codeable_id="97658" codeable_type="Solution" source_url="http://www.iteye.com/problems/44763#s_97658" pre_index="2" title="struts2 验证码实例" style="display: none;">&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;s:head /&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /&gt;
&lt;title&gt;Random Picture&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script type="text/javascript"&gt;
    function changeValidateCode(obj) {
        var currentTime= new Date().getTime();
        obj.src = "rand.action?d=" + currentTime;
    }
&lt;/script&gt;

&lt;img src="rand.action" onclick="changeValidateCode(this)" /&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p></p>

      <div class="ask_label"><span class="gray">2010年6月23日 01:28</span></div>

      <div class="user_info fr">
        <a href="http://xanpeng.iteye.com/blog/answered_problems"><img alt="xanpeng" class="logo" src="./struts2 验证码实例 - ITeye问答_files/0455a5e3-0250-3a8c-9c75-e0b081974fe6-thumb.jpg" title="xanpeng"></a>
<span class="user_blog"><a href="http://xanpeng.iteye.com/blog/answered_problems" title="xanpeng">xanpeng</a></span>
<br>
<span class="score gray" title="问答积分">241</span>
<br>
<span class="gold gray" title="金牌">0</span>
<span class="silver gray" title="银牌">0</span>
<span class="bronze gray" title="铜牌">3</span>

      </div>
    </div>
    <div class="clear"></div>
    <div class="action">
      <ul>
        <li class="comment"><a href="javascript:void(0);" class="ask_click_action" data_action_sub_type="comment" data_action_type="dropdown" data_comments_count="0" data_parent_id="solution_97658" data_url="/solutions/97658/comments"><img alt="Comment" src="./struts2 验证码实例 - ITeye问答_files/comment.gif">添加评论</a></li>
        
        
      </ul>
    </div>

  </dd>
</dl>

  
</div>

<div class="clearfix"></div>





<script type="text/javascript" language="javascript" charset="utf-8">
//<![CDATA[
 window.html_codes = new Hash();




 window.html_codes.set('problem_popup_notice', '<div class=\"#{class_name}\" id=\'problem_popupbox\'>\n  <h2>#{title}<\/h2>\n  #{content}\n<\/div>\n');

 window.check_comment_time = Prototype.emptyFunction;
 window.check_solution_time = Prototype.emptyFunction;

//]]>
</script>


<script type="text/javascript" language="javascript" charset="utf-8">
//<![CDATA[
    dp.SyntaxHighlighter.HighlightAll('code', true, true);
    
    $$('#main .problem .sproblem_right pre[name=code]').each(function(pre, index){ // blog content
      var location = window.location;
      source_url = location.protocol + "//" + location.host + location.pathname + location.search;
      pre.writeAttribute('codeable_id', 44763);
      pre.writeAttribute('codeable_type', "Problem");
      pre.writeAttribute('source_url', source_url);
      pre.writeAttribute('pre_index', index);
      pre.writeAttribute('title', 'struts2 验证码实例');
    });
    $$('#main .solution_dd').each(function(solution){// comment
      var solution_id = solution.id.substr(2);
      $$("#"+solution.id+" pre[name=code]").each(function(pre, index){
        var location = window.location;
        source_url = location.protocol + "//" + location.host + location.pathname + location.search;
        source_url += "#" + solution.id;
        pre.writeAttribute('codeable_id', solution_id);
        pre.writeAttribute('codeable_type', "Solution");
        pre.writeAttribute('source_url', source_url);
        pre.writeAttribute('pre_index', index);
        pre.writeAttribute('title', 'struts2 验证码实例');
      });
    });
    code_favorites_init();
    
    fix_image_size($$('div.content img'), 650);
    function quote_comment(id) {
      new Ajax.Request('/editor/quote', {
        parameters: {'id':id, 'type':'Solution'},
        onSuccess:function(response){
        $('problem_body_form').show();
        $('editor_body').value += response.responseText;
        $('editor_body').focus();
        Element.scrollTo($('editor_body'));
        }
      });
    }
//]]>
</script>



        </div>
        <div id="local">
          
  <div class="search column">
  <form action="http://www.iteye.com/problems/search" method="get">
    <input class="text" id="query" name="query" style="width: 135px;" type="text" value="">
    <input class="submit" type="submit" value="搜索问题">
  </form> 
</div>

  <div id="guild">
  <div class="guild">
    <ul>
      <li class="open"><span>  -47 </span><a href="http://www.iteye.com/problems/active">待解决问题</a></li>
      <li class="close"><span> 26185 </span><a href="http://www.iteye.com/problems/solved">已解决问题</a></li>
      <li class="hot"><span> 95958 </span> <a href="http://www.iteye.com/problems/hot">热门问题</a></li>
    </ul>
  </div>
</div>
  <div class="my">
  <a href="http://ask.csdn.net/" alt="我要提问" target="_blank" title="我要提问"><img alt="Ask-but" src="./struts2 验证码实例 - ITeye问答_files/ask-but.gif"></a>
  <br>
  <div class="ask_but">
    
      <span class="my_ask"><a href="http://www.iteye.com/login">我的问答</a></span>
    
    <span class="help"> <a href="http://www.iteye.com/problems/faq" title="FAQ">FAQ</a> | <a href="http://www.iteye.com/problems/medals">勋章</a></span>
  </div>
</div>

  <div class="column">
  <h3>已解决问题</h3>
  <ul class="close_ask">
    
      <li>
        <a href="http://www.iteye.com/problems/141596">使用Mybatis执行sql时如何统一校验输入参数?</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/141271">js里这种表述式是啥意思？return (y1 - y2 &gt; 0 ? "Up" : "Down");</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/140382">请问基于云架构的J2EE架构应该怎么做？</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/137504">spring ,hibernate 都是用到了asm字节码技术，请问它们具体都拿ASM来实现了什么功能？或者说在哪个功能上用到的</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/136747">如何判断操作系统是32位还是64位？</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/136730">DBA_OBJECTS + ROWNUM 和 DUAL + ROWNUM 一个结果比较的疑问</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/136690">ajax缺点？</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/134845">判断字符串是否是数字开头</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/133335">用java程序监视mysql的变化。求方法</a>
      </li>
    
      <li>
        <a href="http://www.iteye.com/problems/133330">如何对URL地址栏传参的信息进行加密或保护</a>
      </li>
    
  </ul>
</div>
  <div class="column">
  <h3>未解决问题</h3>
  <ul class="new_ask">
    
  </ul>
</div>
  <div class="column">
  <h3>排行榜</h3>
  <ul class="blogs_tab">
    <li class="tab selected" id="blog_hot_tab_week"><a href="javascript:void(0);" onclick="show_hot_blog(&#39;week&#39;)">周榜</a></li>
    <li class="tab" id="blog_hot_tab_month"><a href="javascript:void(0);" onclick="show_hot_blog(&#39;month&#39;)">月榜</a></li>
    <li class="tab" id="blog_hot_tab_all"><a href="javascript:void(0);" onclick="show_hot_blog(&#39;all&#39;)">总榜</a></li>
  </ul>

  <ul class="ask_top" id="blog_hot_week">
    
    <a href="http://www.iteye.com/problems/week_top_users" style="margin: -5px 5px 5px 130px;display:block;">查看全部排名&gt;&gt;</a>
  </ul>
  <ul class="ask_top" id="blog_hot_month" style="display:none;">
    
    <a href="http://www.iteye.com/problems/month_top_users" style="margin: -5px 5px 5px 130px;display:block;">查看全部排名&gt;&gt;</a>
  </ul>
  <ul class="ask_top" id="blog_hot_all" style="display:none;">
    
  <li class="top_1">
    <span class="ranking"></span>
    <div class="user_top">
      <a href="http://lovewhzlq.iteye.com/blog/answered_problems"><img alt="lovewhzlq" class="logo" src="./struts2 验证码实例 - ITeye问答_files/680e45b7-ce64-375b-9bc8-31a33e5637ab-thumb.jpg" title="lovewhzlq"></a>
      <span><a href="http://lovewhzlq.iteye.com/blog/answered_problems" title="lovewhzlq">lovewhzlq</a></span>
      <br>
      <span class="score" title="问答积分">13934</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_2">
    <span class="ranking"></span>
    <div class="user_top">
      <a href="http://jinnianshilongnian.iteye.com/blog/answered_problems"><img alt="jinnianshilongnian" class="logo" src="./struts2 验证码实例 - ITeye问答_files/27128264-eca5-3f36-aa50-724c8e39c68c-thumb.jpg" title="jinnianshilongnian"></a>
      <span><a href="http://jinnianshilongnian.iteye.com/blog/answered_problems" title="jinnianshilongnian">jinnianshilongnian</a></span>
      <br>
      <span class="score" title="问答积分">7280</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_3">
    <span class="ranking"></span>
    <div class="user_top">
      <a href="http://yourgame.iteye.com/blog/answered_problems"><img alt="yourgame" class="logo" src="./struts2 验证码实例 - ITeye问答_files/f5d00197-09d2-34ed-aced-da6281a0699e-thumb.jpg" title="yourgame"></a>
      <span><a href="http://yourgame.iteye.com/blog/answered_problems" title="yourgame">yourgame</a></span>
      <br>
      <span class="score" title="问答积分">5183</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_4">
    <span class="ranking"></span>
    <div class="user_top">
      
      <span><a href="http://huajiang.iteye.com/blog/answered_problems" title="蔡华江">蔡华江</a></span>
      
      <span class="score" title="问答积分">3392</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_5">
    <span class="ranking"></span>
    <div class="user_top">
      
      <span><a href="http://suziwen.iteye.com/blog/answered_problems" title="suziwen">suziwen</a></span>
      
      <span class="score" title="问答积分">3226</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_6">
    <span class="ranking"></span>
    <div class="user_top">
      
      <span><a href="http://ulinkwo.iteye.com/blog/answered_problems" title="myali88">myali88</a></span>
      
      <span class="score" title="问答积分">3108</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_7">
    <span class="ranking"></span>
    <div class="user_top">
      
      <span><a href="http://xiaolongfeixiang.iteye.com/blog/answered_problems" title="xiaolongfeixiang">xiaolongfeixiang</a></span>
      
      <span class="score" title="问答积分">3000</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_8">
    <span class="ranking"></span>
    <div class="user_top">
      
      <span><a href="http://lewhwa.iteye.com/blog/answered_problems" title="lewhwa">lewhwa</a></span>
      
      <span class="score" title="问答积分">2963</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_9">
    <span class="ranking"></span>
    <div class="user_top">
      
      <span><a href="http://zyn010101.iteye.com/blog/answered_problems" title="zyn010101">zyn010101</a></span>
      
      <span class="score" title="问答积分">2795</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

  <li class="top_10">
    <span class="ranking"></span>
    <div class="user_top">
      
      <span><a href="http://duyunfei.iteye.com/blog/answered_problems" title="AngelAndAngel">AngelAndAngel</a></span>
      
      <span class="score" title="问答积分">2641</span>
      <span style="display:none" class="growth_text" title="周增长积分"><img class="growth" src="./struts2 验证码实例 - ITeye问答_files/growth.gif" alt="月增长积分"></span>
    </div>
  </li>

    <a href="http://www.iteye.com/problems/top_users" style="margin: -5px 5px 5px 130px;display:block;">查看全部排名&gt;&gt;</a>
  </ul>
  
</div>

<script type="text/javascript">
  function show_hot_blog(type) {
    ["week", "month", "all"].each(function(t){
      $('blog_hot_' + t).hide();
      $('blog_hot_tab_' + t).removeClassName("selected");
    });
    $('blog_hot_' + type).show();
    $('blog_hot_tab_' + type).addClassName("selected");
  }
</script> 

        </div>
        <div id="nav">
  <div class="wrapper">
    <ul>
            <li><a href="http://www.iteye.com/">首页</a></li>
      <li><a href="http://www.iteye.com/news">资讯</a></li>
      <li><a href="http://www.iteye.com/magazines">精华</a></li>
      <li><a href="http://www.iteye.com/forums">论坛</a></li>
      <li><a href="http://www.iteye.com/ask" class="selected">问答</a></li>
      <li><a href="http://www.iteye.com/blogs">博客</a></li>
      <li><a href="http://www.iteye.com/blogs/subjects">专栏</a></li>
      <li><a href="http://www.iteye.com/groups">群组</a></li>
      <!-- <li><a target="_blank" href="http://job.iteye.com/iteye">招聘</a></li>-->
      <li><a target="_blank" href="http://job.csdn.net/">招聘</a></li>
      <li class="last"><a href="http://www.iteye.com/search">搜索</a></li>
    </ul>
  </div>
</div>
      </div>
      <div id="footer">
  <div id="site_nav">
    <ul>
      <li><a href="http://www.iteye.com/index/service">广告服务</a></li>
      <li><a href="http://webmaster.iteye.com/">ITeye黑板报</a></li>
      <li><a href="http://www.iteye.com/index/contactus">联系我们</a></li>
      <li class="last"><a href="http://www.iteye.com/index/friend_links">友情链接</a></li>
    </ul>
  </div>
  <div id="copyright">
    © 2003-2015 ITeye.com.    [ <a href="http://www.miibeian.gov.cn/">京ICP证110151号</a>  京公网安备110105010620 ]<br>
    百联优力(北京)投资有限公司  版权所有<br>
  </div>
</div>

    </div>
    <script type="text/javascript">
  document.write("<img src='http://stat.iteye.com/?url="+ encodeURIComponent(document.location.href) + "&referrer=" + encodeURIComponent(document.referrer) + "&user_id=' width='0' height='0' />");
</script><img src="./struts2 验证码实例 - ITeye问答_files/saved_resource" width="0" height="0">

<script src="./struts2 验证码实例 - ITeye问答_files/tracking.js" type="text/javascript"></script>

    
  

</body></html>