# 架构设计


## 设计原则

规则一、避免过度设计
内容：在设计中要警惕复杂的解决方案
用法：通过测试同事是否能够轻松地理解解决方案来验证是否存在过度设计
原因：复杂的解决方案实施成本过高，而且长期的维护费用昂贵
要点：复杂的系统限制了扩展性。简单的系统易维护，易扩展且成本低

规则二、方案中包括扩展
内容：提供及时可扩展性的DID方法
用法：Design(D)设计20倍的容量；Implement(I)实施3倍的容量；Deploy（D）部署1.5倍的容量
原因：DID为产品扩展提供了经济，有效，及时的方法
要点：在早期考虑可扩展性可以帮助团队节省时间和金钱。在需求发生大约一个月前实施（写代码），在客户蜂拥而至的几天前部署。

规则三-三次简化方案
内容：在设计复杂系统时，从项目的范围、设计和实施角度简化方案
用法：采用帕累托（Pareto）原则简化范围；考虑成本优化和可扩展性来简化设计；依靠其他人的经验来简化部署；
原因：只聚焦“不过度复杂”，并不能解决需求或历史发展与变革中的各种问题
要点：在产品研发的各个阶段都需要做好简化

## 性能优化
- [软件设计杂谈——性能优化的十种手段（上篇）](https://code2life.top/2020/08/15/0055-performance/)
- [软件设计杂谈——性能优化的十种手段（中篇）](https://code2life.top/2020/08/14/0056-performance2/)
- [软件设计杂谈——性能优化的十种手段（下篇）](https://code2life.top/2020/08/13/0056-performance3/)

性能优化通常是“时间”与“空间”的互换与取舍
- 索引术。比如数据库中的索引技术，数据结构，字段类型，使用注意事项（聚簇索引、索引覆盖）
- 压缩术。时间换空间。操作系统内核与网络设备处理负担 vs 压缩解压的CPU/GPU负担
- 缓存术。DNS缓存、浏览器缓存、应用程序缓存、数据库缓存、操作系统缓存、CPU缓存。甚至一些复用技术也算是缓存的一种应用方式。
- 预取术。原理是在缓存空间换时间基础上，用事先预取的耗时，换取第一次加载的时间
- 削峰填谷术。原理也是“时间换时间”。预取是事先花时间做，削峰填谷是事后花时间做
- 批量处理术。批量处理同样可以看成“时间换时间”，其原理是减少了重复的事情，是一种对执行流程的压缩

提升并行能力
- 榨干计算资源。零拷贝技术，epool，CPU亲和性
- 水平扩容。水平扩容的前提是无状态
- 分片术。水平扩容针对无状态组件，分片针对有状态组件。二者原理都是提升并行度，但分片的难度更大。负载均衡也不再是简单的加权轮询了，而是进化成了各个分片的协调器
- 无锁术。不管是单机还是分布式微服务，锁都是制约并行度的一大因素


## 公司技术委员会职责

<div name="wordShowDiv" word-url="file/公司技术委员会职责.docx"></div>