
<!-- saved from url=(0066)http://api.map.baidu.com/library/GeoUtils/1.2/examples/simple.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>GeoUtils示例</title>
<script type="text/javascript" src="./GeoUtils示例_files/api"></script><script type="text/javascript" src="./GeoUtils示例_files/getscript"></script><link rel="stylesheet" type="text/css" href="./GeoUtils示例_files/bmap.css">
<script type="text/javascript" src="./GeoUtils示例_files/GeoUtils_min.js"></script>
<style type="text/css">
    table{
        font-size:14px;
    }
</style>
</head>
<body>
<div style="float: left; width: 600px; height: 500px; border: 1px solid gray; overflow: hidden; position: relative; z-index: 0; background-color: rgb(243, 241, 236); color: rgb(0, 0, 0); text-align: left;" id="container"><div style="overflow: visible; position: absolute; z-index: 0; left: 24px; top: 7px; cursor: url(http://api.map.baidu.com/images/openhand.cur) 8 8, default;"><div style="position: absolute; z-index: -400; left: 276px; top: 243px;"><img src="./GeoUtils示例_files/saved_resource" style="position: absolute; border: none; width: 32px; height: 32px; left: 149px; top: -38px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(1)" style="position: absolute; border: none; width: 32px; height: 32px; left: 85px; top: -38px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(2)" style="position: absolute; border: none; width: 32px; height: 32px; left: 117px; top: -70px; opacity: 0.78;"><img src="./GeoUtils示例_files/saved_resource(3)" style="position: absolute; border: none; width: 32px; height: 32px; left: 85px; top: -6px; opacity: 0.465;"><img src="./GeoUtils示例_files/saved_resource(4)" style="position: absolute; border: none; width: 32px; height: 32px; left: 149px; top: -70px; opacity: 0.235;"><img src="./GeoUtils示例_files/saved_resource(5)" style="position: absolute; border: none; width: 32px; height: 32px; left: 85px; top: -70px; opacity: 0.31;"></div><div class="BMap_mask" style="position: absolute; left: -24px; top: -7px; z-index: 9; overflow: hidden; -webkit-user-select: none; width: 600px; height: 500px;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 200;"><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 800;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 700;"><span class="BMap_Marker BMap_noprint" unselectable="on" "="" style="position: absolute; padding: 0px; margin: 0px; border: 0px; cursor: pointer; background-image: url(http://api.map.baidu.com/images/blank.gif); width: 19px; height: 25px; left: 349px; top: 192px; z-index: -7983000; -webkit-user-select: none; background-position: initial initial; background-repeat: initial initial;" title=""></span></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 600;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 500;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 400;"><span class="BMap_Marker" unselectable="on" style="position: absolute; padding: 0px; margin: 0px; border: 0px; width: 0px; height: 0px; left: 349px; top: 192px; z-index: -7983000;"><div style="position: absolute; margin: 0px; padding: 0px; width: 19px; height: 25px; overflow: hidden;"><img src="./GeoUtils示例_files/marker_red_sprite.png" style="border:none;left:0px; top:0px; position:absolute;"></div></span></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 300;"><span unselectable="on" style="position: absolute; padding: 0px; margin: 0px; border: 0px; width: 20px; height: 11px; left: 353px; top: 206px;"><div style="position: absolute; margin: 0px; padding: 0px; width: 20px; height: 11px; overflow: hidden;"><img src="./GeoUtils示例_files/marker_red_sprite.png" style="border:none;left:-19px; top:-13px; position:absolute;"></div></span></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 200;"><svg version="1.1" type="system" x="1600px" y="1500px" viewBox="-524 -507 1600 1500" style="position: absolute; top: -507px; left: -524px; width: 1600px; height: 1500px;"><path stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" stroke="#3a6bdb" stroke-width="5" stroke-dasharray="none" fill="#fff" stroke-opacity="0.65" fill-opacity="0.65" d="M 331 172 L 400 172 400 262 331 262 331 172" style="cursor: pointer; -webkit-user-select: none;"></path></svg></div></div><div style="position: absolute; top: 0px; left: 0px; z-index: 1;"><div style="position: absolute; z-index: -100; left: 276px; top: 243px;"><img src="./GeoUtils示例_files/saved_resource(6)" style="position: absolute; border: none; width: 256px; height: 256px; left: -331px; top: -230px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(7)" style="position: absolute; border: none; width: 256px; height: 256px; left: 181px; top: -230px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(8)" style="position: absolute; border: none; width: 256px; height: 256px; left: -75px; top: 26px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(9)" style="position: absolute; border: none; width: 256px; height: 256px; left: -75px; top: -486px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(10)" style="position: absolute; border: none; width: 256px; height: 256px; left: -331px; top: 26px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(11)" style="position: absolute; border: none; width: 256px; height: 256px; left: -331px; top: -486px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(12)" style="position: absolute; border: none; width: 256px; height: 256px; left: 181px; top: 26px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(13)" style="position: absolute; border: none; width: 256px; height: 256px; left: 181px; top: -486px; opacity: 1;"><img src="./GeoUtils示例_files/saved_resource(14)" style="position: absolute; border: none; width: 256px; height: 256px; left: -75px; top: -230px; opacity: 1;"></div></div><div style="position: absolute; top: 0px; left: 0px; z-index: 2;"></div></div><div class=" anchorBL" style="height: 32px; position: absolute; z-index: 10; bottom: 0px; right: auto; top: auto; left: 1px;"><a title="到百度地图查看此区域" target="_blank" href="http://map.baidu.com/?sr=1" style="outline: none;"><img style="border:none;width:77px;height:32px" src="./GeoUtils示例_files/copyright_logo.png"></a></div><div id="zoomer" style="position: absolute; z-index: 0; top: 211px; left: 423px; overflow: hidden; visibility: hidden; cursor: url(http://api.map.baidu.com/images/openhand.cur) 8 8, default; width: 60px; height: 46px;"><div class="BMap_zoomer" style="top: 0px; left: 0px; background-position: -7px -7px;"></div><div class="BMap_zoomer" style="top: 0px; right: 0px; background-position: 0px -7px;"></div><div class="BMap_zoomer" style="bottom: 0px; left: 0px; background-position: -7px 0px;"></div><div class="BMap_zoomer" style="bottom: 0px; right: 0px; background-position: 0px 0px;"></div></div><div unselectable="on" class=" BMap_cpyCtrl anchorBL" style="cursor: default; white-space: nowrap; color: black; background-image: none; font-style: normal; font-variant: normal; font-weight: normal; font-size: 11px; line-height: 15px; font-family: arial, sans-serif; bottom: 2px; right: auto; top: auto; left: 81px; position: absolute; z-index: 10; background-position: initial initial; background-repeat: initial initial;"><span _cid="1" style="display: inline;"><span style="font-size:11px">© 2015 Baidu</span></span></div></div>
<div style="float:left;width:300px;height:500px;border:1px solid gray" id="control">
    <table style="width:100%;">
        <tbody><tr>
            <td colspan="2">点与矩形的关系: </td>
        </tr>
        <tr>            
            <td><input type="button" value="点在矩形内" onclick="ptInRect()"></td>
            <td><input type="button" value="点在矩形外" onclick="ptOutRect()"></td>
        </tr>
        <tr>
            <td><br></td>
        </tr>
        <tr>
            <td colspan="2">点与圆形的关系: </td>
        </tr>
        <tr>            
            <td><input type="button" value="点在圆形内" onclick="ptInCircle()"></td>
            <td><input type="button" value="点在圆形外" onclick="ptOutCircle()"></td>
        </tr>
        <tr>
            <td><br></td>
        </tr>
        <tr>
            <td colspan="2">计算折线长度: </td>
        </tr>
        <tr>            
            <td><input type="button" value="参数为折线" onclick="computeLenByPolyine()"></td>
            <td><input type="button" value="参数为点数组" onclick="computeLenByArray()"></td>
        </tr>
        <tr>
            <td><br></td>
        </tr>
        <tr>
            <td colspan="2">计算多边形面积: </td>
        </tr>
        <tr>            
            <td><input type="button" value="参数为多边形" onclick="computeAreaByPolygon()"></td>
            <td><input type="button" value="参数为点数组" onclick="computeAreaByArray()"></td>
        </tr>
        <tr>
            <td><br></td>
        </tr>
        <tr>
            <td colspan="2">判断点是否在折线上: </td>
        </tr>
        <tr>            
            <td><input type="button" value="点在折线上" onclick="ptOnPolyline()"></td>
            <td><input type="button" value="点在折线外" onclick="ptOutPolyline()"></td>
        </tr>
        <tr>
            <td><br></td>
        </tr>
        <tr>
            <td colspan="2">判断点是否在多边形内: </td>
        </tr>
        <tr>            
            <td><input type="button" value="点在多边形内" onclick="ptInPolygon()"></td>
            <td><input type="button" value="点在多边形外" onclick="ptOutPolygon()"></td>
        </tr>
    </tbody></table><table>



<script type="text/javascript">

var map = new BMap.Map("container");
var pt = new BMap.Point(116.404, 39.915);
map.centerAndZoom(pt, 16);

map.enableScrollWheelZoom();//开启滚动缩放
map.enableContinuousZoom();//开启缩放平滑

//点在矩形内
function ptInRect(){    
    var pt = new BMap.Point(116.404, 39.915);//测试点

    var pt1 = new BMap.Point(116.400, 39.910);//西南脚点
    var pt2 = new BMap.Point(116.410, 39.920);//东北脚点
    var bds = new BMap.Bounds(pt1, pt2); //测试Bounds对象
        
    var result = BMapLib.GeoUtils.isPointInRect(pt, bds);
    if(result == true){
        alert("点在矩形内");
    } else {
        alert("点在矩形外")
    }

    //演示：将点与矩形添加到地图上
    map.clearOverlays();    
    var mkr = new BMap.Marker(pt);
    var pts = [];
    //bds的四个脚点坐标
    var leftTop = new BMap.Point(pt1.lng, pt2.lat);
    var rightTop = new BMap.Point(pt2.lng, pt2.lat);
    var leftBottom = new BMap.Point(pt1.lng, pt1.lat);
    var rightBottom = new BMap.Point(pt2.lng, pt1.lat);
    pts.push(leftTop);
    pts.push(rightTop);
    pts.push(rightBottom);
    pts.push(leftBottom);
    var rect = new BMap.Polygon(pts);
    map.addOverlay(mkr);//添加测试点
    map.addOverlay(rect);//添加测试矩形    
    
}

//点在矩形外
function ptOutRect(){
    var pt = new BMap.Point(116.398, 39.915);//测试点

    var pt1 = new BMap.Point(116.400, 39.910);//西南脚点
    var pt2 = new BMap.Point(116.410, 39.920);//东北脚点
    var bds = new BMap.Bounds(pt1, pt2); //测试Bounds对象
        
    var result = BMapLib.GeoUtils.isPointInRect(pt, bds);
    if(result == true){
        alert("点在矩形内");
    } else {
        alert("点在矩形外")
    }

    //演示：将点与矩形添加到地图上
    map.clearOverlays();    
    var mkr = new BMap.Marker(pt);
    var pts = [];
    //bds的四个脚点坐标
    var leftTop = new BMap.Point(pt1.lng, pt2.lat);
    var rightTop = new BMap.Point(pt2.lng, pt2.lat);
    var leftBottom = new BMap.Point(pt1.lng, pt1.lat);
    var rightBottom = new BMap.Point(pt2.lng, pt1.lat);
    pts.push(leftTop);
    pts.push(rightTop);
    pts.push(rightBottom);
    pts.push(leftBottom);
    var rect = new BMap.Polygon(pts);
    map.addOverlay(mkr);//添加测试点
    map.addOverlay(rect);//添加测试矩形     
}

//点在圆内
function ptInCircle(){
    var pt = new BMap.Point(116.404, 39.915);//测试点
    var c = new BMap.Point(116.404, 39.915); //圆心 
    var circle = new BMap.Circle(c, 500);//测试圆
        
    var result = BMapLib.GeoUtils.isPointInCircle(pt, circle);
    if(result == true){
        alert("点在圆形内");
    } else {
        alert("点在圆形外")
    }

    //演示：将点与圆形添加到地图上
    map.clearOverlays();
    var mkr = new BMap.Marker(pt);
    map.addOverlay(mkr);
    map.addOverlay(circle);
}

//点在圆外
function ptOutCircle(){
    var pt = new BMap.Point(116.396, 39.915);//测试点
    var c = new BMap.Point(116.404, 39.915); //圆心 
    var circle = new BMap.Circle(c, 500);//测试圆        
    
    var result = BMapLib.GeoUtils.isPointInCircle(pt, circle);
    if(result == true){
        alert("点在圆形内");
    } else {
        alert("点在圆形外")
    }

    //演示：将点与圆形添加到地图上
    map.clearOverlays();
    var mkr = new BMap.Marker(pt);
    map.addOverlay(mkr);
    map.addOverlay(circle);
}

//计算长度，参数为折线
function computeLenByPolyine(){    
    var pts = [];
    var pt1 = new BMap.Point(116.400,39.910);
    var pt2 = new BMap.Point(116.402,39.912);
    var pt3 = new BMap.Point(116.403,39.914);
    var pt4 = new BMap.Point(116.404,39.917);
    var pt5 = new BMap.Point(116.406,39.918);
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    pts.push(pt4);
    pts.push(pt5);

    var ply = new BMap.Polyline(pts);    
    var dis = BMapLib.GeoUtils.getPolylineDistance(ply);
    alert("共" + dis.toFixed(2) + "米");
    
    //演示：将线添加到地图上
    map.clearOverlays();
    map.addOverlay(ply);
}

//计算长度，参数为点数组
function computeLenByArray(){
    var pts = [];
    var pt1 = new BMap.Point(116.400,39.910);
    var pt2 = new BMap.Point(116.402,39.912);
    var pt3 = new BMap.Point(116.403,39.914);
    var pt4 = new BMap.Point(116.404,39.917);
    var pt5 = new BMap.Point(116.406,39.918);
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    pts.push(pt4);
    pts.push(pt5);
        
    var dis = BMapLib.GeoUtils.getPolylineDistance(pts);
    alert("共" + dis.toFixed(2) + "米");
    
    //演示：将线添加到地图上
    var ply = new BMap.Polyline(pts, {strokeColor: "red", strokeStyle:"dashed"});
    map.clearOverlays();
    map.addOverlay(ply);        
}

//计算面积，参数为多边形
function computeAreaByPolygon(){
    var pts = [];
    var pt1 = new BMap.Point(116.395, 39.910);
    var pt2 = new BMap.Point(116.394, 39.918);
    var pt3 = new BMap.Point(116.396, 39.919);
    var pt4 = new BMap.Point(116.404, 39.920);
    var pt5 = new BMap.Point(116.406, 39.913);    
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    pts.push(pt4);
    pts.push(pt5);    

    var ply = new BMap.Polygon(pts);    
    var area = BMapLib.GeoUtils.getPolygonArea(ply);
    alert("共" + area.toFixed(2) + "平方米"); 
    
    //演示：将面添加到地图上    
    map.clearOverlays();
    map.addOverlay(ply);  
}

//计算面积，参数为数组
function computeAreaByArray(){
    var pts = [];
    var pt1 = new BMap.Point(116.395, 39.910);
    var pt2 = new BMap.Point(116.394, 39.918);
    var pt3 = new BMap.Point(116.396, 39.919);
    var pt4 = new BMap.Point(116.404, 39.920);
    var pt5 = new BMap.Point(116.406, 39.913);    
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    pts.push(pt4);
    pts.push(pt5);
        
    var area = BMapLib.GeoUtils.getPolygonArea(pts);
    alert("共" + area.toFixed(2) + "平方米"); 
    
    //演示：将面添加到地图上
    var ply = new BMap.Polygon(pts, {strokeColor: "red", strokeStyle:"dashed", fillColor:"gray"});    
    map.clearOverlays();
    map.addOverlay(ply);          
}

//点在折线上
function ptOnPolyline(){
    var pts = [];
    var pt1 = new BMap.Point(116.395, 39.910);
    var pt2 = new BMap.Point(116.405, 39.920);
    var pt3 = new BMap.Point(116.410, 39.920);
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    var ply = new BMap.Polyline(pts);
    
    var pt = new BMap.Point(116.400, 39.915);    
    
    var result = BMapLib.GeoUtils.isPointOnPolyline(pt, ply);
    if(result == true){
        alert("点在折线上");
    } else {
        alert("点在折线外")
    }
    
    map.clearOverlays();
    var mkr = new BMap.Marker(pt);    
    map.addOverlay(mkr);    
    map.addOverlay(ply);   
}

//点在折线外
function ptOutPolyline(){
    var pts = [];
    var pt1 = new BMap.Point(116.395, 39.910);
    var pt2 = new BMap.Point(116.405, 39.920);
    var pt3 = new BMap.Point(116.410, 39.920);
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    var ply = new BMap.Polyline(pts);
    
    var pt = new BMap.Point(116.401, 39.915);    
    
    var result = BMapLib.GeoUtils.isPointOnPolyline(pt, ply);
    if(result == true){
        alert("点在折线上");
    } else {
        alert("点在折线外")
    }
    
    map.clearOverlays();
    var mkr = new BMap.Marker(pt);    
    map.addOverlay(mkr);    
    map.addOverlay(ply);   
}

//点在多边形内
function ptInPolygon(){
    var pts = [];
    var pt1 = new BMap.Point(116.395, 39.910);
    var pt2 = new BMap.Point(116.394, 39.914);
    var pt3 = new BMap.Point(116.403, 39.920);
    var pt4 = new BMap.Point(116.402, 39.914);
    var pt5 = new BMap.Point(116.410, 39.913);    
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    pts.push(pt4);
    pts.push(pt5);  
    var ply = new BMap.Polygon(pts);
    
    var pt =new BMap.Point(116.400, 39.914);
    
    var result = BMapLib.GeoUtils.isPointInPolygon(pt, ply);
    if(result == true){
        alert("点在多边形内");
    } else {
        alert("点在多边形外")
    } 
    
    //演示：将面添加到地图上    
    map.clearOverlays();
    var mkr = new BMap.Marker(pt);
    map.addOverlay(mkr);
    map.addOverlay(ply);      
}

//点在多边形外
function ptOutPolygon(){
    var pts = [];
    var pt1 = new BMap.Point(116.395, 39.910);
    var pt2 = new BMap.Point(116.394, 39.914);
    var pt3 = new BMap.Point(116.396, 39.919);
    var pt4 = new BMap.Point(116.406, 39.920);
    var pt5 = new BMap.Point(116.410, 39.913);    
    
    pts.push(pt1);
    pts.push(pt2);
    pts.push(pt3);
    pts.push(pt4);
    pts.push(pt5);  
    var ply = new BMap.Polygon(pts);
    
    var pt =new BMap.Point(116.410, 39.915);
    
    var result = BMapLib.GeoUtils.isPointInPolygon(pt, ply);
    if(result == true){
        alert("点在多边形内");
    } else {
        alert("点在多边形外")
    } 
    
    //演示：将面添加到地图上    
    map.clearOverlays();
    var mkr = new BMap.Marker(pt);
    map.addOverlay(mkr);
    map.addOverlay(ply); 
}
</script></table></div></body></html>